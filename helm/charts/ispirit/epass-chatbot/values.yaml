# Common Labels
labels:
  app: "epass-chatbot"
  group: "ispirit"
namespace: ispirit

# Ingress Configs
ingress:
  enabled: true
  context: "sms-webhook"
  ip-whitelist: "0.0.0.0/0"
  host: |
    - host: {{ index .Values "global" "moca-domain" }}
  tls: |
      - hosts:
        - {{ index .Values "global" "moca-domain" }}
        secretName: {{ index .Values "global" "moca-domain" }}-tls-certs  
  additionalAnnotations: |
    certmanager.k8s.io/cluster-issuer: {{ index $.Values "cluster-configs" "root-ingress" "cert-issuer" | quote }}  
    nginx.ingress.kubernetes.io/whitelist-source-range: {{ index .Values "ingress" "ip-whitelist" | quote }}      

# Container Configs
image:
  repository: "epass-chatbot"
replicas: "1"
healthChecks:
  enabled: true
  livenessProbePath: "/sms-webhook/health"
  readinessProbePath: "/sms-webhook/health"
tracing-enabled: true
heap: "-Xmx192m -Xms192m"
java-args: ""
sender-id: DOCAEP


# Additional Container Envs
env: | 
  - name: APP_TIMEZONE
    value: "Asia/Kolkata"       
  - name: SERVER_PORT
    value: "8080"
  - name: TRACER_OPENTRACING_ENABLED
    value: "true"
  - name: KAFKA_CONFIG_BOOTSTRAP_SERVER_CONFIG
    value: {{ index $.Values "cluster-configs" "configmaps" "egov-config" "data" "kafka-brokers" }}
  - name: SPRING_KAFKA_BOOTSTRAP_SERVERS
    value: {{ index $.Values "cluster-configs" "configmaps" "egov-config" "data" "kafka-brokers" }}
  - name: JAEGER_SERVICE_NAME
    value: epass-chatbot
  - name: JAEGER_SAMPLER_TYPE
    value: remote
  - name: JAEGER_AGENT_HOST
    valueFrom:
      fieldRef:
        apiVersion: v1
        fieldPath: status.hostIP
  - name: JAEGER_AGENT_PORT
    value: "6831"
  - name: JAEGER_SAMPLER_MANAGER_HOST_PORT
    value: $(JAEGER_AGENT_HOST):5778
  - name: JAVA_OPTS
    value: {{ index .Values "heap" | quote }}
  - name: KARIX_SENDER_ID
    value: {{ index .Values "sender-id" | quote }}