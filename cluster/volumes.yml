{% if conf['es-cluster']%}
{% for index in range(conf['es-cluster']['es-data']['replicas']) %}
  apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: es-storage-es-data-{{index}}
    labels:
      app: elasticsearch
  spec:
    capacity:
      storage: 5Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Recycle
    claimRef:
        namespace: es-cluster
        name: es-storage-es-data-{{index}}
    hostPath:
      path: /opt/eGov/es-storage-es-data-{{index}}
---
{% endfor %}
{% endif %}
{% for index in range(conf['zookeeper']['replicas']) %}
  apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: zookeeper-data-zookeeper-{{index}}
    labels:
      app: zookeeper
  spec:
    capacity:
      storage: 5Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Recycle
    claimRef:
        namespace: backbone
        name: zookeeper-data-zookeeper-{{index}}
    hostPath:
      path: /opt/eGov/zookeeper-data-zookeeper-{{index}}
---
{% endfor %}
  apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: filestore-volume
    annotations:
      volume.beta.kubernetes.io/storage-class: "slow"
    labels:
      app: egov-filestore
  spec:
    capacity:
      storage: 5Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Recycle
    claimRef:
        namespace: egov
        name: filestore-volume-claim
    hostPath:
      path: /opt/eGov/filestore
---
{% for index in range(conf['kafka']['replicas']) %}
  apiVersion: v1
  kind: PersistentVolume
  metadata:
    name: kafka-data-kafka-{{index}}
    labels:
      app: kafka
  spec:
    capacity:
      storage: 5Gi
    accessModes:
      - ReadWriteOnce
    persistentVolumeReclaimPolicy: Recycle
    claimRef:
        namespace: backbone
        name: kafka-data-kafka-{{index}}
    hostPath:
      path: /opt/eGov/kafka-data-kafka-{{index}}
---
{% endfor %}