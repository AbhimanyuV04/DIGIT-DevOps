apiVersion: v1
kind: Secret
metadata:
  name: egov-notification-sms
  namespace: egov
type: Opaque
data:
  username: {{conf['egov-notification-sms-secret']['username'] | decrypt}}
  password: {{conf['egov-notification-sms-secret']['password'] | decrypt}}
---
apiVersion: v1
kind: Secret
metadata:
  name: db
  namespace: egov
type: Opaque
data:
  username: {{conf['db-secret']['username'] | decrypt}}
  password: {{conf['db-secret']['password'] | decrypt}}
  flyway-username: {{conf['db-secret']['username'] | decrypt}}
  flyway-password: {{conf['db-secret']['password'] | decrypt}}
{% if conf['egov-docker-registry-secret'] %}
---
apiVersion: v1
data:
  .dockercfg: {{conf['egov-docker-registry-secret']['dockercfg'] | decrypt}}
kind: Secret
metadata:
  name: regsecret
  namespace: egov
type: kubernetes.io/dockercfg
{% endif %}
{% if conf['es-alerts'] %}
---
apiVersion: v1
kind: Secret
metadata:
  name: slack
  namespace: monitoring
type: Opaque
data:
  slack-url: {{conf['es-alerts']['slack-url'] | decrypt}}
{% endif %}
{% if conf['cloudwatch-push-mem-metrics']%}
---
apiVersion: v1
kind: Secret
metadata:
  name: aws-config
  namespace: monitoring
type: Opaque
data:
  aws-access-key-id: "{{conf['cloudwatch-push-mem-metrics']['aws_access_key_id'] | decrypt}}"
  aws-secret-access-key: "{{conf['cloudwatch-push-mem-metrics']['aws_secret_access_key'] | decrypt}}"
{% endif %}
{% if conf['verdaccio']%}
---
apiVersion: v1
kind: Secret
metadata:
  name: verdaccio-htpassword
  namespace: backbone
type: Opaque
data:
  verdaccio-htpassword: "{{conf['verdaccio']['htpassword'] | decrypt}}"
{% endif %}
